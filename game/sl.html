<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTGame æ‰«é›·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2, #80deea);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        /* æ¯›ç»ç’ƒæ•ˆæœå®¹å™¨ */
        .glass-container {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.18);
            padding: 20px;
            width: 90%;
            max-width: 95vw;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        /* Logoè¿‡åœºåŠ¨ç”» */
        .logo-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeOut 1.5s ease-in-out 2s forwards;
        }
        
        .logo {
            font-size: 3rem;
            font-weight: bold;
            color: #00796b;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(20px);
            animation: slideUp 1s ease-out 0.5s forwards;
        }
        
        .tagline {
            color: #00838f;
            font-size: 1.2rem;
            opacity: 0;
            animation: fadeIn 1s ease-out 1s forwards;
        }
        
        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }
        
        /* æ¸¸æˆæ ‡é¢˜ */
        .game-title {
            text-align: center;
            color: #00796b;
            margin-bottom: 20px;
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        /* æ¸¸æˆæ§åˆ¶é¢æ¿ */
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .difficulty {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        button {
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            padding: 8px 15px;
            color: #00796b;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        button.active {
            background: rgba(0, 121, 107, 0.2);
            border-color: #00796b;
        }
        
        .stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 15px;
            font-weight: bold;
            color: #00796b;
            min-width: 80px;
            text-align: center;
        }
        
        /* æ¸¸æˆæ¿ */
        .board-container {
            width: 100%;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .board {
            display: grid;
            gap: 2px;
            margin: 0 auto;
            width: fit-content;
        }
        
        .cell {
            width: 30px;
            height: 30px;
            min-width: 30px;
            min-height: 30px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }
        
        .cell:hover {
            background: rgba(255, 255, 255, 0.6);
        }
        
        .cell.revealed {
            background: rgba(255, 255, 255, 0.7);
        }
        
        .cell.mine {
            background: rgba(239, 154, 154, 0.7);
        }
        
        .cell.flagged {
            background: rgba(129, 212, 250, 0.7);
        }
        
        /* æ•°å­—é¢œè‰² */
        .cell-1 { color: #0277bd; }
        .cell-2 { color: #00838f; }
        .cell-3 { color: #2e7d32; }
        .cell-4 { color: #5d4037; }
        .cell-5 { color: #6a1b9a; }
        .cell-6 { color: #ad1457; }
        .cell-7 { color: #d84315; }
        .cell-8 { color: #37474f; }
        
        /* æ¸¸æˆç»“æŸè¦†ç›–å±‚ */
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .game-over.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .game-over h2 {
            color: #00796b;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        /* éŸ³æ•ˆæ§åˆ¶ */
        .sound-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 600px) {
            .cell {
                width: 25px;
                height: 25px;
                min-width: 25px;
                min-height: 25px;
                font-size: 0.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .difficulty {
                width: 100%;
                justify-content: space-between;
            }
            
            .stats {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <!-- Logoè¿‡åœºåŠ¨ç”» -->
    <div class="logo-overlay">
        <div class="logo">YTGame</div>
        <div class="tagline">presents</div>
    </div>
    
    <!-- éŸ³æ•ˆæ§åˆ¶ -->
    <div class="sound-control" id="sound-control">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 10V14C3 14.5523 3.44772 15 4 15H6.41421L11.7071 20.2929C12.0976 20.6834 12.7308 20.6834 13.1213 20.2929C13.5118 19.9024 13.5118 19.2692 13.1213 18.8787L8.24264 14H5V10H8.24264L13.1213 5.12132C13.5118 4.7308 13.5118 4.09763 13.1213 3.70711C12.7308 3.31658 12.0976 3.31658 11.7071 3.70711L6.41421 9H4C3.44772 9 3 9.44772 3 10Z" fill="#00796b"/>
            <path d="M16.2929 7.70711C15.9024 7.31658 15.9024 6.68342 16.2929 6.29289C16.6834 5.90237 17.3166 5.90237 17.7071 6.29289L20.2929 8.87868C20.6834 9.2692 20.6834 9.90237 20.2929 10.2929L17.7071 12.8787C17.3166 13.2692 16.6834 13.2692 16.2929 12.8787C15.9024 12.4882 15.9024 11.855 16.2929 11.4645L18.1716 9.58579L16.2929 7.70711Z" fill="#00796b"/>
            <path d="M20.2929 15.1213L17.7071 17.7071C17.3166 18.0976 16.6834 18.0976 16.2929 17.7071C15.9024 17.3166 15.9024 16.6834 16.2929 16.2929L18.1716 14.4142L16.2929 12.5355C15.9024 12.145 15.9024 11.5118 16.2929 11.1213C16.6834 10.7308 17.3166 10.7308 17.7071 11.1213L20.2929 13.7071C20.6834 14.0976 20.6834 14.7308 20.2929 15.1213Z" fill="#00796b"/>
        </svg>
    </div>
    
    <!-- æ¸¸æˆä¸»å®¹å™¨ -->
    <div class="glass-container">
        <h1 class="game-title">æ‰«é›·</h1>
        
        <div class="controls">
            <div class="difficulty">
                <button class="active" data-difficulty="easy">ç®€å•</button>
                <button data-difficulty="medium">ä¸­ç­‰</button>
                <button data-difficulty="hard">å›°éš¾</button>
            </div>
            
            <div class="stats">
                <div class="stat" id="mines-count">ğŸ’£ <span id="mines-remaining">10</span></div>
                <div class="stat" id="timer">â± ï¸ <span id="time-display">0</span></div>
            </div>
        </div>
        
        <div class="board-container">
            <div class="board" id="board"></div>
        </div>
        
        <div class="game-over" id="game-over">
            <h2 id="game-result">æ¸¸æˆç»“æŸ</h2>
            <button id="restart-btn">å†æ¥ä¸€å±€</button>
        </div>
    </div>
 
    <!-- éŸ³æ•ˆ -->
    <audio id="click-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" preload="auto"></audio>
    <audio id="flag-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3" preload="auto"></audio>
    <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>
    <audio id="lose-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.mp3" preload="auto"></audio>
 
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // æ¸¸æˆçŠ¶æ€ 
            let board = [];
            let boardSize = 10;
            let mineCount = 10;
            let revealedCount = 0;
            let gameOver = false;
            let timerInterval;
            let seconds = 0;
            let firstClick = true;
            let flagsPlaced = 0;
            let soundEnabled = true;
            
            // DOMå…ƒç´  
            const boardElement = document.getElementById('board');
            const minesRemainingElement = document.getElementById('mines-remaining');
            const timeDisplayElement = document.getElementById('time-display');
            const gameOverElement = document.getElementById('game-over');
            const gameResultElement = document.getElementById('game-result');
            const restartBtn = document.getElementById('restart-btn');
            const difficultyButtons = document.querySelectorAll('[data-difficulty]');
            const soundControl = document.getElementById('sound-control');
            
            // éŸ³æ•ˆå…ƒç´  
            const clickSound = document.getElementById('click-sound');
            const flagSound = document.getElementById('flag-sound');
            const winSound = document.getElementById('win-sound');
            const loseSound = document.getElementById('lose-sound');
            
            // åˆå§‹åŒ–æ¸¸æˆ 
            function initGame() {
                // é‡ç½®æ¸¸æˆçŠ¶æ€ 
                board = [];
                revealedCount = 0;
                gameOver = false;
                firstClick = true;
                flagsPlaced = 0;
                clearInterval(timerInterval);
                seconds = 0;
                timeDisplayElement.textContent = seconds;
                minesRemainingElement.textContent = mineCount;
                
                // åˆ›å»ºç©ºç™½æ¿ 
                for (let i = 0; i < boardSize; i++) {
                    board[i] = [];
                    for (let j = 0; j < boardSize; j++) {
                        board[i][j] = {
                            isMine: false,
                            isRevealed: false,
                            isFlagged: false,
                            value: 0 
                        };
                    }
                }
                
                // æ›´æ–°UI 
                renderBoard();
                gameOverElement.classList.remove('show');
                
                // è°ƒæ•´æ¸¸æˆæ¿å®¹å™¨å¤§å° 
                adjustBoardContainer();
            }
            
            // è°ƒæ•´æ¸¸æˆæ¿å®¹å™¨å¤§å° 
            function adjustBoardContainer() {
                const boardContainer = document.querySelector('.board-container');
                const cellSize = window.innerWidth < 600 ? 25 : 30;
                const boardWidth = boardSize * (cellSize + 2); // +2 for gap 
                
                // è®¾ç½®æœ€å°å®½åº¦ä»¥ç¡®ä¿æ‰€æœ‰æ ¼å­å¯è§ 
                boardContainer.style.minWidth = `${boardWidth}px`;
            }
            
            // æ”¾ç½®åœ°é›· 
            function placeMines(firstClickRow, firstClickCol) {
                let minesPlaced = 0;
                
                while (minesPlaced < mineCount) {
                    const row = Math.floor(Math.random() * boardSize);
                    const col = Math.floor(Math.random() * boardSize);
                    
                    // ç¡®ä¿ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„ä½ç½®å’Œå‘¨å›´æ²¡æœ‰åœ°é›· 
                    if ((row === firstClickRow && col === firstClickCol) || 
                        (Math.abs(row - firstClickRow) <= 1 && Math.abs(col - firstClickCol) <= 1)) {
                        continue;
                    }
                    
                    if (!board[row][col].isMine) {
                        board[row][col].isMine = true;
                        minesPlaced++;
                    }
                }
                
                // è®¡ç®—æ¯ä¸ªå•å…ƒæ ¼çš„æ•°å­— 
                calculateNumbers();
            }
            
            // è®¡ç®—æ¯ä¸ªå•å…ƒæ ¼çš„æ•°å­—ï¼ˆå‘¨å›´åœ°é›·æ•°ï¼‰
            function calculateNumbers() {
                for (let i = 0; i < boardSize; i++) {
                    for (let j = 0; j < boardSize; j++) {
                        if (!board[i][j].isMine) {
                            let count = 0;
                            
                            // æ£€æŸ¥å‘¨å›´8ä¸ªæ–¹å‘ 
                            for (let di = -1; di <= 1; di++) {
                                for (let dj = -1; dj <= 1; dj++) {
                                    if (di === 0 && dj === 0) continue;
                                    
                                    const ni = i + di;
                                    const nj = j + dj;
                                    
                                    if (ni >= 0 && ni < boardSize && nj >= 0 && nj < boardSize && board[ni][nj].isMine) {
                                        count++;
                                    }
                                }
                            }
                            
                            board[i][j].value = count;
                        }
                    }
                }
            }
            
            // æ¸²æŸ“æ¸¸æˆæ¿ 
            function renderBoard() {
                boardElement.innerHTML = '';
                boardElement.style.gridTemplateColumns = `repeat(${boardSize}, 1fr)`;
                
                for (let i = 0; i < boardSize; i++) {
                    for (let j = 0; j < boardSize; j++) {
                        const cell = board[i][j];
                        const cellElement = document.createElement('div');
                        cellElement.className = 'cell';
                        cellElement.dataset.row = i;
                        cellElement.dataset.col = j;
                        
                        if (cell.isRevealed) {
                            cellElement.classList.add('revealed');
                            
                            if (cell.isMine) {
                                cellElement.classList.add('mine');
                                cellElement.textContent = 'ğŸ’£';
                            } else if (cell.value > 0) {
                                cellElement.textContent = cell.value;
                                cellElement.classList.add(`cell-${cell.value}`);
                            }
                        } else if (cell.isFlagged) {
                            cellElement.classList.add('flagged');
                            cellElement.textContent = 'ğŸš©';
                        }
                        
                        cellElement.addEventListener('click', () => handleCellClick(i, j));
                        cellElement.addEventListener('contextmenu', (e) => {
                            e.preventDefault();
                            handleRightClick(i, j);
                        });
                        
                        boardElement.appendChild(cellElement);
                    }
                }
            }
            
            // å¤„ç†å•å…ƒæ ¼ç‚¹å‡» 
            function handleCellClick(row, col) {
                if (gameOver || board[row][col].isRevealed || board[row][col].isFlagged) return;
                
                // æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ 
                if (soundEnabled) {
                    clickSound.currentTime = 0;
                    clickSound.play();
                }
                
                // ç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶æ”¾ç½®åœ°é›·å¹¶å¼€å§‹è®¡æ—¶ 
                if (firstClick) {
                    placeMines(row, col);
                    startTimer();
                    firstClick = false;
                }
                
                // å¦‚æœæ˜¯åœ°é›·ï¼Œæ¸¸æˆç»“æŸ 
                if (board[row][col].isMine) {
                    revealAllMines();
                    gameOver = true;
                    gameResultElement.textContent = 'æ¸¸æˆå¤±è´¥';
                    gameOverElement.classList.add('show');
                    
                    // æ’­æ”¾å¤±è´¥éŸ³æ•ˆ 
                    if (soundEnabled) {
                        loseSound.currentTime = 0;
                        loseSound.play();
                    }
                    return;
                }
                
                // æ­ç¤ºå•å…ƒæ ¼ 
                revealCell(row, col);
                
                // æ£€æŸ¥æ˜¯å¦è·èƒœ 
                if (revealedCount === boardSize * boardSize - mineCount) {
                    gameOver = true;
                    gameResultElement.textContent = 'æ­å–œè·èƒœ!';
                    gameOverElement.classList.add('show');
                    
                    // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ 
                    if (soundEnabled) {
                        winSound.currentTime = 0;
                        winSound.play();
                    }
                }
            }
            
            // å¤„ç†å³é”®ç‚¹å‡»ï¼ˆæ ‡è®°æ——å¸œï¼‰
            function handleRightClick(row, col) {
                if (gameOver || board[row][col].isRevealed) return;
                
                // æ’­æ”¾æ ‡è®°éŸ³æ•ˆ 
                if (soundEnabled) {
                    flagSound.currentTime = 0;
                    flagSound.play();
                }
                
                // æ›´æ–°æ——å¸œçŠ¶æ€ 
                if (board[row][col].isFlagged) {
                    board[row][col].isFlagged = false;
                    flagsPlaced--;
                } else {
                    board[row][col].isFlagged = true;
                    flagsPlaced++;
                }
                
                // æ›´æ–°å‰©ä½™é›·æ•°æ˜¾ç¤º 
                minesRemainingElement.textContent = mineCount - flagsPlaced;
                
                renderBoard();
            }
            
            // æ­ç¤ºå•å…ƒæ ¼ 
            function revealCell(row, col) {
                // è¶…å‡ºè¾¹ç•Œæˆ–å·²æ­ç¤º 
                if (row < 0 || row >= boardSize || col < 0 || col >= boardSize || 
                    board[row][col].isRevealed || board[row][col].isFlagged) {
                    return;
                }
                
                board[row][col].isRevealed = true;
                revealedCount++;
                
                // å¦‚æœæ˜¯ç©ºç™½å•å…ƒæ ¼ï¼Œé€’å½’æ­ç¤ºå‘¨å›´å•å…ƒæ ¼ 
                if (board[row][col].value === 0) {
                    for (let di = -1; di <= 1; di++) {
                        for (let dj = -1; dj <= 1; dj++) {
                            if (di === 0 && dj === 0) continue;
                            revealCell(row + di, col + dj);
                        }
                    }
                }
                
                renderBoard();
            }
            
            // æ­ç¤ºæ‰€æœ‰åœ°é›·ï¼ˆæ¸¸æˆç»“æŸæ—¶ï¼‰
            function revealAllMines() {
                for (let i = 0; i < boardSize; i++) {
                    for (let j = 0; j < boardSize; j++) {
                        if (board[i][j].isMine) {
                            board[i][j].isRevealed = true;
                        }
                    }
                }
                renderBoard();
            }
            
            // å¼€å§‹è®¡æ—¶å™¨ 
            function startTimer() {
                clearInterval(timerInterval);
                seconds = 0;
                timeDisplayElement.textContent = seconds;
                
                timerInterval = setInterval(() => {
                    seconds++;
                    timeDisplayElement.textContent = seconds;
                }, 1000);
            }
            
            // è®¾ç½®éš¾åº¦ 
            function setDifficulty(difficulty) {
                switch (difficulty) {
                    case 'easy':
                        boardSize = 10;
                        mineCount = 10;
                        break;
                    case 'medium':
                        boardSize = 16;
                        mineCount = 40;
                        break;
                    case 'hard':
                        boardSize = 20;
                        mineCount = 80;
                        break;
                }
                
                minesRemainingElement.textContent = mineCount;
                initGame();
            }
            
            // åˆ‡æ¢éŸ³æ•ˆ 
            function toggleSound() {
                soundEnabled = !soundEnabled;
                soundControl.innerHTML = soundEnabled ? 
                    `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 10V14C3 14.5523 3.44772 15 4 15H6.41421L11.7071 20.2929C12.0976 20.6834 12.7308 20.6834 13.1213 20.2929C13.5118 19.9024 13.5118 19.2692 13.1213 18.8787L8.24264 14H5V10H8.24264L13.1213 5.12132C13.5118 4.7308 13.5118 4.09763 13.1213 3.70711C12.7308 3.31658 12.0976 3.31658 11.7071 3.70711L6.41421 9H4C3.44772 9 3 9.44772 3 10Z" fill="#00796b"/>
                        <path d="M16.2929 7.70711C15.9024 7.31658 15.9024 6.68342 16.2929 6.29289C16.6834 5.90237 17.3166 5.90237 17.7071 6.29289L20.2929 8.87868C20.6834 9.2692 20.6834 9.90237 20.2929 10.2929L17.7071 12.8787C17.3166 13.2692 16.6834 13.2692 16.2929 12.8787C15.9024 12.4882 15.9024 11.855 16.2929 11.4645L18.1716 9.58579L16.2929 7.70711Z" fill="#00796b"/>
                        <path d="M20.2929 15.1213L17.7071 17.7071C17.3166 18.0976 16.6834 18.0976 16.2929 17.7071C15.9024 17.3166 15.9024 16.6834 16.2929 16.2929L18.1716 14.4142L16.2929 12.5355C15.9024 12.145 15.9024 11.5118 16.2929 11.1213C16.6834 10.7308 17.3166 10.7308 17.7071 11.1213L20.2929 13.7071C20.6834 14.0976 20.6834 14.7308 20.2929 15.1213Z" fill="#00796b"/>
                    </svg>` :
                    `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 10V14C3 14.5523 3.44772 15 4 15H6.41421L11.7071 20.2929C12.0976 20.6834 12.7308 20.6834 13.1213 20.2929C13.5118 19.9024 13.5118 19.2692 13.1213 18.8787L8.24264 14H5V10H8.24264L13.1213 5.12132C13.5118 4.7308 13.5118 4.09763 13.1213 3.70711C12.7308 3.31658 12.0976 3.31658 11.7071 3.70711L6.41421 9H4C3.44772 9 3 9.44772 3 10Z" fill="#00796b"/>
                        <path d="M16 10L19 13M19 10L16 13" stroke="#00796b" stroke-width="2" stroke-linecap="round"/>
                    </svg>`;
            }
            
            // äº‹ä»¶ç›‘å¬å™¨ 
            difficultyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    difficultyButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    setDifficulty(button.dataset.difficulty);
                });
            });
            
            restartBtn.addEventListener('click', initGame);
            soundControl.addEventListener('click', toggleSound);
            
            // çª—å£å¤§å°æ”¹å˜æ—¶è°ƒæ•´æ¸¸æˆæ¿ 
            window.addEventListener('resize', adjustBoardContainer);
            
            // åˆå§‹è®¾ç½®ä¸ºç®€å•éš¾åº¦ 
            setDifficulty('easy');
        });
    </script>
</body>
</html>
